##### 1.数据库的三级模式
​三级模式包括<u>外模式、模式和内模式</u>，分别对应<u>视图级别、表级别和文件级别</u>。外模式是<u>用户与数据库系统的接口</u>，模式是<u>数据库中全部数据的逻辑结构和特征的描述</u>，内模式是数据物理结构和存储方式的描述。<u>对于内模式而言，是定义所有内部的记录类型，索引和文件的组织方式，以及数据控制方面的细节。</u>

##### 2.什么是数据转储？
​数据转储可以分为<u>静态转储和动态转储</u>两种方式。静态转储在转储期间不允许对数据库进行任何存取、修改操作。而动态转储则允许在转储期间对数据库进行存取、修改操作，因此转储和用户事务可以并发执行。如果系统中有正在运行的事务，并要对数据库进行全部转储，则应该使用动态全局转储方式，以允许转储和用户事务可以并发执行。	

##### 3.Armstrong 公理系统 
① A1自反律：若 Y⊆X⊆U，则 X→Y 为 F 所蕴含；
② A2增广律：若 X→Y为 F 所蕴含，且 Z⊆U，则 XZ→YZ 为 F 所蕴含；
③ A3传递律：若 X→Y，Y→Z 为 F 所蕴含，则 X→Z 为 F 所蕴含。
根据上面三条推理规则，又可推出下面三条推理规则：
④ 合并规则：若 X→Y，X→Z，则X→YZ 为 F 所蕴含；
⑤ 伪传递规则：若 X→Y，WY→Z，则 XW→Z 为 F 所蕴含；
⑥ 分解规则：若 X→Y，Z⊆Y，则 X→Z 为 F 所蕴含。

##### 4.自然连接和笛卡尔积
自然连接可看作是在广义笛卡尔积 R × S 中<u>选出同名属性上符合相等条件元组，再进行投影，去掉重复的同名属性</u>，组成新的关系，自然链接符号是⋈。排序也是去重后排序的。
笛卡尔乘积的符号是×。

##### 5.属性冲突和结构冲突
**属性冲突**（Attribute Conflict）指的是在不同关系模式中有相同名称但是含义不同的属性，或者同一关系模式中属性名称不一致导致混淆的问题。属性冲突可能导致数据不一致和冗余。
**结构冲突**（Structural Conflict）指的是在数据库设计中，不同关系间的结构（即模式）不一致，导致不能直接进行操作或者查询的问题（可能需要转化）。结构冲突包括关系模式的不匹配、不一致的数据类型、不同的键约束等。

##### 6.基于网络的数据库系统
​	基于网络的数据库系统主要由<u>客户端、通信协议和远程服务器</u>三部分组成，其中<u>客户端提供接口给嵌入式程序</u>，在逻辑上看作远程服务器的一个客户端。<u>通信协议规范客户端与远程服务器之间的通信</u>。<u>远程服务器维护服务器上的数据库数据</u>。
​	基于文件的数据库一般采用文件方式存储数据库数据，即按照一定格式储存在磁盘中。

##### 7.派生属性
派生属性是数据库中的衍生数据，是一种特殊属性。<u>派生属性是指可以由其他属性进行计算来获得的属性</u>，如年龄可以由出生日期和系统当前时间计算获得，是派生属性。

##### 8. 属性闭包 (Attribute Closure)
​属性闭包指的是通过一个属性集（或属性集合），能推导出的所有属性的集合。具体计算方法如下：
① 开始时闭包只包含自己。
② 重复应用函数依赖规则，将新的属性加入闭包，直到无法再加入新的属性。
③ 当无法再引入新属性时，闭包计算完成。

##### 9.候选键 (Candidate Key)
候选键是指能唯一标识关系中元组的最小属性集。计算方法：
① 确定哪些属性集的闭包可以覆盖全集U。
② 找到覆盖全集的最小属性集，即候选键

候选码的计算分方法有分析法和作图法。个人建议用作图法。作图法就是根据题目给出的函数依赖画出有向图。然后从起点（入度为0的点）出发找，看是否能遍历所有节点。一个不行再试另一个起点。最后的结果就是候选码。

##### 10.分布式数据库系统中有四种透明性
① 分片透明性指用户在对数据进行操作时不需要关心数据具体是如何分片的，对于应用程序而言，所有操作在全局关系层面上进行，因此分片对用户来说是透明的，当分片改变时应用程序可以保持不变。
② 复制透明性指用户不必关心数据库在网络中各个节点的复制情况，被复制的数据的更新会由系统自动完成。复制数据可以提高系统的运行和查询效率，但更新操作需要对所有复制数据进行。
③ 位置透明性指用户不必知道所操作的数据所在的位置，数据分配到哪个或哪些站点存储对用户是透明的。因此，在数据分片模式改变时，如将数据从一个站点转移到另一个站点，应用程序不受影响。
④ 局部映像透明性是最基本的透明性，它提供了数据到局部数据库的映像，即用户不必关心局部**DBMS**支持哪种数据模型或操纵语言，数据模型和操纵语言的转换由系统完成。

##### 11.索引、视图、触发器、存储过程
① 索引是提高数据库查询效率的机制，但不能进行数据更新。
② 视图具有一定的安全机制，但也不能更新数据。
③ 触发器可以作为更新机制，但无法完全保证数据库安全性。
④ 存储过程可以定义一段代码来提供给用户程序调用，通过代码调用来实现更新，避免了向第三方提供系统表结构的过程，从而更好地保证了数据库的安全性。

##### 12.物化视图
​物化视图是数据库中的一种存储结构，它保存了视图查询的结果数据，这样可以直接查询物化视图，从而提高数据查询的性能。与普通视图不同，普通视图是一个逻辑结构，查询时并不存储数据，而是每次查询时动态执行定义视图的查询语句。
**特性和优点**
1. **数据存储**：物化视图存储了实际的数据，不同于普通视图只是存储了查询语句。
2. **性能提升**：由于数据事先计算并存储，可以显著提升复杂查询的执行速度。
3. **定期刷新**：可以定期刷新物化视图的数据，以确保应用所需的数据是最新的。
4. **同步性**：物化视图支持完全刷新和增量刷新，以确保数据的同步和更新效率。
**使用场景**
1. **报表和统计**：需要频繁进行复杂的聚合或统计计算场景，可以使用物化视图来提升查询性能。
2. **数据仓库**：在数据仓库中，物化视图用于加速数据查询和分析，减少复杂查询的响应时间。
3. **离线计算**：提前计算好需要的数据存储到物化视图中，供在线查询使用，避免实时计算的开销。
4. **合并多表数据**：物化视图可以将多表连接后的结果存储起来，以便快速查询。

##### 13.候选键 (Candidate Key)
​在关系数据库中，<u>候选键是一组属性（一个或多个）的集合，这组属性能够唯一标识关系中的每一个元组，并且没有冗余属性。</u>也就是说，在任何一个候选键中，移除任何一个属性都不能唯一标识关系中的元组。
一个关系中可能存在多个候选键，而每一个候选键都有可能作为主键（Primary Key），但是关系中的主键只能有一个。
**特性**
1. **唯一性**：候选键中的属性集合能够唯一标识关系中的每一个元组。
2. **最小性**：候选键中的属性集合是最小的，不能再去掉任何一个属性，不然就不能唯一标识关系中的元组。
3. **非冗余**：在候选键中不存在多余的属性，所有属性都对唯一性起关键作用。

##### 14.无损分解
**公式法**
1. **找到候选键**：理解并整理原始关系的候选键。
2. **识别公共属性**：分解后子关系间的公共属性集合。
3. **检查属性覆盖**：通过函数依赖检查联合-交集条件。
   - 如果满足：R1 ∩ R2 -> R1
   - 或者满足：R1 ∩ R2 -> R2
   - 则为无损分解，否则不无损。
**属性闭包法**
1. **计算闭包**：计算各个属性集合的闭包。
2. **识别关键属性**：查找能够决定所有其他属性的候选键。
3. **检查覆盖性**：确认分解后的子关系的属性结合能够覆盖整个关系。

##### 15.函数依赖
**1.完全函数依赖**
如果属性集合 Y 完全依赖于属性集合 X，而不是 X 的某个真子集(如果 A 是 B 的子集,并且 B 中至少有一个元素不属于 A,那么集合 A 叫做集合 B 的*真子集*。集合本身也是自己的子集,但不是*真子集*。)，那么 Y 完全函数依赖于 X。记作 X -> Y，并且不存在 Z ⊂ X 使得 Z → Y。
例如：在学生表中，电子邮件 Email 完全依赖于学生ID StudentID，即StudentID_>Email.
**2.部分函数依赖**
如果属性集合 Y 依赖于属性集合 X ，但是 X 也依赖于 Y 的某个真子集，那么 Y 部分函数依赖于 X。
例如：假设关系 R(A,B,C)，AB决定C，即AB→C，但 A→>C 也成立。则 C 依赖于 A 始终也在 AB 依赖下。
**3.传递函数依赖**
如果 X >Y且 Y -> Z 、那么可以通过传递性得出 X -> Z,

##### 16.数据库范式
**第一范式（1NF）**
要求所有的列（字段）都是原子的，即每个列中的数据都是<u>不可再分的基本数据项</u>。若一个表格中包含重复的分组属性或嵌套表格，则违背了第一范式的要求。
**示例**：  
不满足1NF：`Student(StudentID, Name, [Email1, Email2])`  
满足1NF：`Student(StudentID, Name, Email)`

**第二范式（2NF）**
<u>在满足1NF 的基础上，要求每个非键属性完全依赖于候选键，消除部分函数依赖。</u>如果一个非主属性对主键的依赖只是部分依赖（即只依赖某个主键的一部分），那么就不满足2NF。我们需要将这些部分依赖的属性移到另一个关系中。
**示例**：  
不满足2NF：`OrderDetail(OrderID, ProductID, ProductName, Quantity)`  
满足2NF：将表分为两个：`Order(OrderID, ProductID, Quantity)` 和 `Product(ProductID, ProductName)`

**第三范式（3NF）**
<u>在满足2NF的基础上，要求消除传递函数依赖，即非主键属性不依赖于其他非主键属性。</u>也就是说，如果存在一个非主属性 A，通过另一个非主属性 B 依赖于候选键 C，那么这种情况必须消除。

##### Boyce-Codd 范式（BCNF）
<u>在满足3NF 的基础上，进一步要求对于每个非平凡函数依赖 X  -> Y，X 必须是一个超键。</u>
**示例**：  
不满足BCNF：`StudentCourse(StudentID, CourseID, InstructorID)`  
满足 BCNF：将表分为多个更小的表，如 `StudentCourse(StudentID, CourseID)` 和 `CourseInstructor(CourseID, InstructorID)`

##### 第四范式（4NF）
在满足BCNF的基础上，消除多值依赖。每个多值依赖的属性应该独立成表。
**示例**：  
假设有表 `Project(EmployeeID, ProjectID, Skill)` 不满足4NF，因为一个员工可以同时有多个项目和多个技能。  
满足4NF：将表分为 `EmployeeProject(EmployeeID, ProjectID)` 和 `EmployeeSkill(EmployeeID, Skill)`。

##### 第五范式（5NF）
在满足4NF的基础上，消除连接依赖（Join Dependency）。任何连接依赖应该都可以通过投影分解来恢复。

##### 17.超键、候选键与主键的关系
1. **超键（Super Key）**：任何能够唯一标识元组的属性集合。
2. **候选键（Candidate Key）**：最小的超键，即没有冗余属性的超键。一个表可以有多个候选键。
3. **主键（Primary Key）**：在候选键中选择一个作为主键，用来唯一标识表中的元组。

##### 18 .分布式数据库系统的层次和模式
**全局外模式 (Global External Schema)**
全局外模式是用户或应用程序与分布式数据库之间最高层的抽象层次。它提供了系统外部用户需要用到的视图，使得用户在使用分布式数据库时感觉如同在操作一个集中式数据库。

**全局概念模式 (Global Conceptual Schema)**
全局概念模式是分布式数据库的整体抽象，描述了数据库中所有数据的特性和逻辑结构。它是全局数据的逻辑视图，将所有分布于不同物理节点的数据，以统一的方式表示出来，使得不同物理位置的数据看起来像是存储在一个单一的数据库中

**分片模式 (Fragmentation Schema)**
分片模式描述了如何将全局数据按照某些逻辑条件进行划分。分片可以分为三种主要类型：
- **水平分片**：将表的行划分到不同的分片中。
- **垂直分片**：将表的列划分到不同的分片中。
- **混合分片**：同时使用水平和垂直分片的方法。

**分配模式 (Allocation Schema)**
分配模式描述了分片后的数据片段在不同物理节点上的分配。它定义了哪些数据片段存储在哪些节点上，以及这些存储的方式。这属于全局概念层次中的内容，因为它不仅考虑了逻辑划分，还考虑了物理存储和分配策略。

**局部概念模式 (Local Conceptual Schema)**
局部概念模式由各个局部数据库的局部概念模式描述。它是全局概念模式的子集，是已经分割和分配后的数据在每个局部节点上的逻辑视图。每个局部数据库根据其局部概念模式来管理数据：
- **子集**：全局概念模式的一部分。
- **局部管理**：各个局部节点独立管理其分配到的数据。

##### 19. 如何提高查询效率
在关系代数中，提高查询效率的一种做法是尽可能早地进行选择操作，从而减少中间结果的大小。自然连接一般比笛卡尔积的效率高。
**例子：**
假设两个关系 R 和 S 分别有 m 和 n 个元组:
- 在笛卡尔积见 R x S 中，我们会得到 m x n 个元组
- 在自然连接 R 以 S 中，只有那些满足卫和 S 在连接属性上值相等的元组才会保留下来，通常数量远小于 m x n。

##### 20. 数据仓库的特点 `*`
（1）面向主题。数据按主题组织。
（2）集成性。消除了源数据中的不一致性，提供整个企业的一致性全局信息。
（3）相对稳定性（非易失的）。主要进行查询操作，只有少量的修改和删除操作（或是不删除）。
（4）反映历史变化（随着时间变化）。记录了企业从过去某一时刻到当前各个阶段的信息，可对发展历程和未来趋势做定量分析和预测。

##### 21. 表达式中的各个符号
`R* = { t | (∃u)(R(t) ∧ S(u) ∧ t[3] < u[2])}`
- `R(t)`表示元组 t 属于关系 R。
- `S(u)`表示元组 u 属于关系 S。
- `t[3]<u[2]` 表示 R 中的元组 t 的第 3 列值小于 S 中的 s 元组的第 2 列值。
- `∃u` 表示存在一个 u，所以只需要在满足 u 中的一行即可。
我们需要找出满足上述条件的 R 中的所有元组 t。

##### 22.二阶段提交算法
为了保持分布式系统架构下事务提交时的一致性而设计的。在分布式系统中，每个节点无法知道其他节点的操作结果，为了保持 ACID 特性，需要一个协调者组件来掌控所有参与节点的操作结果并做出统一的提交或中止操作的决策。二阶段提交算法包括<u>准备阶段和提交阶段</u>两个阶段，其中准备阶段被称为表决阶段，每个参与者要么在本地执行事务并写本地 redo 和 undo 日志，要么直接返回失败状态。提交阶段根据协调者的指令执行提交或回滚操作，并释放所有事务处理过程中使用的锁资源，必须在最后阶段释放锁资源。

##### 23. 嵌入式数据库
嵌入式数据库管理系统（EDBMS）就是在嵌入式设备上使用的 DBMS。由于用到 EDBMS 的嵌入式系统多是移动信息设备，例如，掌上电脑、PDA、车载设备等移动通信设备，位置固定的嵌入式设备很少用到，因此，嵌入式数据库也称为移动数据库或嵌入式移动数据库。<u>EDBMS 的作用主要是解决移动计算环境下数据的管理问题，移动数据库是移动计算环境中的分布式数据库。嵌入式数据库管理系统一般只提供本机服务接口且只为前端应用提供基本的数据支持，支持多线程并发操作。</u>

##### 24.单个属性的主键
<u>当一个表的主键仅由一个属性组成时，该表中的所有非主键属性都完全依赖于这个单一的主键属性，并不会存在仅依赖于主键一部分的情况。</u>这是因为主键是唯一标识表中每一行记录的，而单一属性作为主键时，整个属性即整个主键，不存在部分的概念。
在数据库的规范化理论中，部分依赖是指非主键属性只依赖于组合主键的一部分。例如，如果一个表的主键由两个或多个属性组成，即组合主键，那么可能某些非主键属性仅与主键的一部分属性相关，而非与整个主键相关。这种情况在单个属性作为主键的场景下是不会出现的，因为主键只有一个属性，非主键属性要么完全依赖于这个属性（主键），要么就是不依赖于它，不存在部分依赖的情况。

##### 25 .数据库系统的三级模式
**内模式（Internal Schema）**：描述数据在数据库内部的物理存储结构和存取方法。
**概念模式（Conceptual Schema）**：描述数据库的全局逻辑结构，是对所有用户可见的数据的整体逻辑视图。
**外模式（External Schema）**：也称为子模式（Subschema），描述用户看到或使用的那部分数据的逻辑结构。外模式是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。

##### 26 .事务的四个特性（ACID）
**原子性 (Atomicity)**：
- **定义**：事务是数据库操作中不可分割的最小工作单位。要么全部执行，要么全部不执行。
- **作用**：确保在事务执行过程中，任何部分的失败都将导致事务所做的任何修改全部回滚，恢复到事务执行之前的状态。
 **一致性 (Consistency)**：
- **定义**：事务在完成时，必须使数据库从一种一致性状态转变到另一种一致性状态。
- **作用**：确保事务执行完成后，所有数据都满足所有的完整性约束。
**隔离性 (Isolation)**：
- **定义**：事务的执行过程与其他事务隔离开，即一个事务的中间状态对其他事务不可见，只有在提交之后，事务的所有修改才会对其他事务可见。
- **作用**：确保并发事务不互相影响，防止数据的不一致。
**持久性 (Durability)**：
- **定义**：一旦事务提交，它对数据库的改变就是永久性的，即使系统发生故障，已提交的事务的结果也不会丢失。
- **作用**：确保已提交的事务对数据库的改变是永久保存的。

##### 27 .数据库设计阶段
数据库设计分为<u>用户需求分析、概念设计、逻辑设计和物理设计</u>4个主要阶段。逻辑结构设计阶段能用某个具体的 DBMS实现用户需要，将概念结构转换相应的数据模型，并根据用户处理要求、安全性考虑，在基本表的基础上建立必要的视图，并对数据模型进行优化。<u>数据模型设计、E-R图转换为关系模式、关系模式规范化、确定完整性约束、确定用户视图、反规范化设计在此阶段。</u>

